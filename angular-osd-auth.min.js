"use strict";!function(){angular.module("osdAuth",[])}(),function(){function t(){var t={};return t.uses={constant:0,request:1},t.config={constant:"CURRENT_USER",groupKey:"name",login:"/api/v1/auth/login",logout:"/api/v1/auth/logout",register:"/api/v1/auth/register",request:"/api/v1/auth/current",use:t.uses.constant},t.setGroupKey=function(n){t.config.groupKey=n},t.setLogin=function(n){t.config.login=n},t.setLogout=function(n){t.config.logout=n},t.setRegister=function(n){t.config.register=n},t.setUseConstant=function(n){t.config.use=t.uses.constant,t.config.constant=n},t.setUseRequest=function(n){t.config.use=t.uses.request,t.config.request=n},t.$get=function(){return t},t}angular.module("osdAuth").provider("OsdAuthConfig",t)}(),function(){function t(t,n,e,u,o,r){var s=o.config,i=o.uses,c=function(){return s.use===i.constant?n.get(s.constant):s.use===i.request?t.get(s.request):void 0};e.when(c()).then(function(t){r.setUser(t),u.$broadcast("osdauth-user-loaded")})}t.$inject=["$http","$injector","$q","$rootScope","OsdAuthConfig","OsdAuthUser"],angular.module("osdAuth").run(t)}(),function(){function t(t,n,e,u,o){var r={};return r.login=function(r){return t.when(n.post(u.config.login,r)).then(function(t){return e.$broadcast("osdauth-login-success"),o.setUser(t.data).getUser()})["catch"](function(t){throw e.$broadcast("osdauth-login-error",t.data),t})},r.logout=function(){return t.when(n.post(u.config.logout)).then(function(){return e.$broadcast("osdauth-logout-success"),o.setUser(null).getUser()})["catch"](function(t){throw e.$broadcast("osdauth-logout-error",t.data),t})},r.register=function(r){return t.when(n.post(u.config.register,r)).then(function(t){return e.$broadcast("osdauth-register-success"),o.setUser(t.data).getUser()})["catch"](function(t){throw e.$broadcast("osdauth-register-error",t.data),t})},r}t.$inject=["$q","$http","$rootScope","OsdAuthConfig","OsdAuthUser"],angular.module("osdAuth").service("OsdAuth",t)}(),function(){function t(t,n){function e(){u.user&&u.user.groups&&(u.groups=u.user.groups.map(function(t){return t[n.config.groupKey]}))}var u={};return u.user=null,u.groups=null,u.getUser=function(){return u.user},u.setUser=function(n){return u.user=n,e(),t.$broadcast("osdauth-user-updated"),u},u.getGroups=function(){return u.groups||["guest"]},u.isAuthenticated=function(){return!!u.user},u.isAuthorized=function(t){if(angular.isArray(t)||(t=[t]),!u.isAuthenticated()&&-1===t.indexOf("guest"))return!1;var n=u.getGroups();if(-1!==n.indexOf("admin"))return!0;var e=t.filter(function(t){return-1!==n.indexOf(t)});return!t.length||e.length},u}t.$inject=["$rootScope","OsdAuthConfig"],angular.module("osdAuth").service("OsdAuthUser",t)}();